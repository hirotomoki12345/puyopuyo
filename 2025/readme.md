『ぷよぷよ』ゲーム設計仕様書
（コードなし、全ての仕様を詳細にまとめる）

1. 基本ルール
1.1 フィールド
フィールドは縦12マス × 横6マスの格子で構成される。
画面外に1マス分（13段目）だけぷよを置くことが可能。
ただし、14段目にはぷよを置くことができない。
軸ぷよを14段目に移動させる操作は不可能。
各マスには1つのぷよを配置可能。
1.2 ぷよの落下
ぷよは**2つ1組（組ぷよ）**で落下する。
ぷよの色:
通常のぷよ（5色）: 赤・緑・青・黄・紫
おじゃまぷよ: 灰色（固定され、連鎖では消えないが、隣接するぷよが消えると連鎖で消せる）
操作できる動作:
回転（Z, Xキー）
横移動（← →キー）
高速落下（↓キー）
ソフトドロップ（長押しで加速）
次に落下するぷよは「NEXTぷよ」として表示される。
2. ぷよの消滅と連鎖
2.1 ぷよの接着
上下左右で同じ色のぷよが4個以上つながると消える（斜めは無効）。
ぷよが消えると、その上にあるぷよが落下する。
2.2 連鎖
連鎖とは:

ぷよが消えた後、上のぷよが落下し、新たに4つ以上つながると連鎖が発生する。
連鎖は 「○連鎖」と表示される。
連鎖時のボーナス加点:

消したぷよの数 × (連鎖ボーナス + 連結ボーナス + 色数ボーナス) × 10
連鎖ボーナス（ポイント）:

連鎖数	ボーナス
1連鎖	0
2連鎖	8
3連鎖	16
4連鎖	32
5連鎖	64
6連鎖	96
7連鎖	128
8連鎖	160
9連鎖	192
10連鎖	224
11連鎖	256
12連鎖	288
13連鎖	320
14連鎖	352
15連鎖	384
16連鎖	416
17連鎖	448
18連鎖	480
19連鎖	512
連結ボーナス（同時消し数）:

ぷよ数	ボーナス
4個	0
5個	2
6個	3
7個	4
8個	5
9個	6
10個	7
11個以上	10
色数ボーナス:

色数	ボーナス
1色	0
2色	3
3色	6
4色	12
5色	24
2.3 ぷよが消えたときのエフェクト
ぷよは点滅しながら消えるアニメーションを実装。
連鎖した位置の近くに 「○連鎖」 という表示を出す。
3. 操作仕様
3.1 フレーム単位での操作監視
入力はフレームごとにチェックし、滑らかな操作を実現する。
3.2 ぷよの回転
Zキー: 左回転
Xキー: 右回転
回転時の制約:
他のぷよや壁にぶつからないように回転可能かチェック。
回転できない場合、「ずらし回転」 を試みる。
ずらし回転でも不可能なら、0.5秒以内に2回回転ボタンが押された場合、180度回転する。
3.3 落下アニメーション
ぷよが固定される前に**「遊び時間」**を設ける（configで管理）。
遊び時間内であれば 回転を利用して1マス上げることが可能（1ターンにつき最大6回）。
3.4 1マス上げ機能
落下中、回転を利用して1マス上げることが可能。
1ターンにつき最大6回まで上げられる。
遊び時間終了後はこの機能は無効になる。
4. 設定ファイル（config.js）
js
コピーする
編集する
const config = {
  fallSpeed: 1,          // 落下速度
  lockDelay: 30,         // 固定までの遊び時間（フレーム数）
  raiseLimitPerTurn: 6,  // 1ターンに最大6回まで1マス上げる
  rotateBufferTime: 30,  // 0.5秒以内（30フレーム）に2回回転で180度回転
};
5. 画像管理
5.1 ぷよ画像の配置
画像ファイルは img/{色}/image_{色番号}-{アセット番号}.png とする
色番号:
1 = 赤
2 = 緑
3 = 青
4 = 黄色
5 = 紫
アセット番号:
アセット番号	連結方向
1	通常（連結なし）
2	下のみ
3	上のみ
4	上下
5	右のみ
6	右下
7	右上
8	上下右
9	左のみ
10	左下
11	左上
12	上下左
13	左右
14	左右下
15	左右上
16	左右上下
